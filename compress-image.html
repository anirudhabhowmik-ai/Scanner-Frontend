<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Primary Meta Tags -->
    <title>
      Free Image Compressor Online - Reduce JPG, PNG, WEBP Size | NextoPDF
    </title>
    <meta
      name="title"
      content="Free Image Compressor Online - Reduce JPG, PNG, WEBP Size | NextoPDF"
    />
    <meta
      name="description"
      content="Compress images online for free. Reduce JPG, PNG, and WEBP file sizes without losing quality. Fast, secure image compression tool. No registration required."
    />
    <meta
      name="keywords"
      content="compress image online, reduce image size, JPG compressor, PNG compressor, WEBP compressor, image optimizer, photo compressor, reduce file size, free image compression"
    />
    <meta name="author" content="NextoPDF" />
    <meta
      name="robots"
      content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"
    />
    <meta name="google-adsense-account" content="ca-pub-5797619165090350">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://nextopdf.com/compress-image" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://nextopdf.com/compress-image" />
    <meta
      property="og:title"
      content="Free Image Compressor Online - Reduce JPG, PNG, WEBP Size | NextoPDF"
    />
    <meta
      property="og:description"
      content="Compress images online for free. Reduce JPG, PNG, and WEBP file sizes without losing quality. Fast and secure."
    />
    <meta
      property="og:image"
      content="https://nextopdf.com/images/compress-image-og.png"
    />
    <meta property="og:site_name" content="NextoPDF" />
    <meta property="og:locale" content="en_US" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="https://nextopdf.com/compress-image" />
    <meta
      name="twitter:title"
      content="Free Image Compressor Online - Reduce JPG, PNG, WEBP Size | NextoPDF"
    />
    <meta
      name="twitter:description"
      content="Compress images online for free. Reduce JPG, PNG, and WEBP file sizes without losing quality."
    />
    <meta
      name="twitter:image"
      content="https://nextopdf.com/images/compress-image-twitter.png"
    />

    <!-- Structured Data / Schema.org -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Image Compressor - NextoPDF",
        "url": "https://nextopdf.com/compress-image",
        "description": "Free online image compression tool to reduce JPG, PNG, and WEBP file sizes without losing quality",
        "applicationCategory": "UtilitiesApplication",
        "operatingSystem": "Any",
        "browserRequirements": "Requires JavaScript. Requires HTML5.",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "USD"
        },
        "featureList": [
          "Compress JPG images",
          "Compress PNG images",
          "Compress WEBP images",
          "No quality loss compression",
          "Batch image compression",
          "Secure processing"
        ]
      }
    </script>

    <!-- Breadcrumb Schema -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
          {
            "@type": "ListItem",
            "position": 1,
            "name": "Home",
            "item": "https://nextopdf.com"
          },
          {
            "@type": "ListItem",
            "position": 2,
            "name": "Compress Image",
            "item": "https://nextopdf.com/compress-image"
          }
        ]
      }
    </script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;700&family=Inter:wght@400;500&display=swap"
      rel="stylesheet"
    />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- CSS -->
    <link rel="stylesheet" href="./css/style.css" />

    <!-- Favicon -->
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="./images/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="./images/favicon-16x16.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="./images/apple-touch-icon.png"
    />

    <!-- Google AdSense (Replace with your AdSense ID) -->
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5797619165090350"
      crossorigin="anonymous"
    ></script>
  </head>

  <body>
    <section id="header-placeholder"></section>

    <section class="merge-tool">
      <div class="container">
        <h1>Compress Image Online Free</h1>
        <p>
          Reduce image file size without visible quality loss. Optimize JPG,
          PNG, and WEBP images instantly.
        </p>

        <div class="upload-section">
          <!-- Upload -->
          <div id="uploadSection">
            <label class="upload-label">
              <i class="fa fa-upload"></i> Choose Image
              <input type="file" id="imageUpload" accept="image/*" hidden />
            </label>
          </div>

          <!-- File List -->
          <ul id="fileList" class="file-list" style="display: none"></ul>

          <!-- Compress Button -->
          <button id="compressBtn" class="cta-button">
            <i class="fa fa-compress btn-icon"></i>
            <i
              class="fa fa-spinner fa-spin loader-icon"
              style="display: none"
            ></i>
            Compress Image
          </button>

          <!-- Error -->
          <p id="errorMsg" class="error-text" style="display: none"></p>

          <!-- Note -->
          <p id="noteText" class="note" style="margin-top: 10px">
            Supported formats: JPG, PNG, WEBP. Large images are processed on the
            server.
          </p>

          <!-- Result -->
          <div id="resultBtns" style="display: none; margin-top: 20px">
            <div id="resultCard" class="result-card">
              <i class="fa fa-image"></i>
            </div>

            <p class="file-name">
              <a href="#" id="fileNameLink">compressed.jpg</a>
            </p>

            <div id="compressionInfo" class="result-info" style="display: none">
              <p>
                <strong>Original Size:</strong> <span id="originalSize">-</span>
              </p>
              <p>
                <strong>Compressed Size:</strong>
                <span id="compressedSize">-</span>
              </p>
              <p>
                <strong>Size Reduced:</strong>
                <span id="reductionPercent" class="size-badge">-</span>
              </p>
            </div>

            <!-- Buttons -->
            <a id="downloadBtn" class="cta-button">
              <i class="fa fa-download"></i> Download Compressed Image
            </a>

            <a id="shareBtn" class="cta-button" style="display: none">
              <i class="fa fa-share-alt"></i> Share
            </a>

            <button id="resetBtn" class="secondary-btn">
              <i class="fa fa-rotate-right"></i> Compress Another Image
            </button>
          </div>
        </div>

        <!-- Preview -->
        <div id="imagePreview" style="display: none; margin-top: 30px">
          <h4>Preview Compressed Image</h4>
          <img
            id="imageFrame"
            style="
              max-width: 100%;
              border-radius: 12px;
              border: 1px solid #e5e7eb;
            "
            alt="Compressed image preview"
          />
        </div>
      </div>
    </section>

    <!-- Understanding Image Compression Section -->
    <section class="features" style="background: #f9fafb; padding: 60px 20px">
      <div class="container">
        <h2>Understanding Image Compression</h2>
        <div style="max-width: 900px; margin: 0 auto; text-align: left">
          <p style="color: #555; line-height: 1.8; margin-bottom: 30px">
            Image compression is essential for modern web performance and
            efficient storage management. Whether you're managing a website,
            sharing photos on social media, or sending images via email,
            optimizing image file sizes can significantly improve loading speeds
            and reduce bandwidth consumption without compromising visual
            quality.
          </p>

          <h3 style="color: #1e3a8a; margin-bottom: 15px; margin-top: 35px">
            Why Image Compression Matters
          </h3>
          <p style="color: #555; line-height: 1.8; margin-bottom: 25px">
            Large image files can slow down websites, consume valuable storage
            space, and make file sharing difficult. Our compression tool reduces
            image file sizes by removing unnecessary metadata and optimizing the
            way image data is stored. This process maintains visual quality
            while making images more manageable for various digital
            applications.
          </p>

          <h3 style="color: #1e3a8a; margin-bottom: 15px; margin-top: 35px">
            How Our Image Compressor Works
          </h3>
          <p style="color: #555; line-height: 1.8; margin-bottom: 15px">
            Our tool uses advanced compression algorithms to analyze and
            optimize your images. The process involves several steps:
          </p>
          <ul
            style="
              color: #555;
              line-height: 1.8;
              margin-bottom: 25px;
              padding-left: 25px;
            "
          >
            <li style="margin-bottom: 10px">
              <strong>Metadata Removal:</strong> Images often contain
              unnecessary metadata like camera settings, GPS coordinates, and
              thumbnails. Removing this data can reduce file size by 5-15%
              without affecting the image itself.
            </li>
            <li style="margin-bottom: 10px">
              <strong>Smart Optimization:</strong> The algorithm analyzes each
              image to determine the optimal compression level that maintains
              visual quality while achieving maximum size reduction.
            </li>
            <li style="margin-bottom: 10px">
              <strong>Format-Specific Processing:</strong> Different image
              formats (JPG, PNG, WEBP) require different compression approaches.
              Our tool applies the most effective method for each format.
            </li>
          </ul>

          <h3 style="color: #1e3a8a; margin-bottom: 15px; margin-top: 35px">
            Supported Image Formats
          </h3>
          <p style="color: #555; line-height: 1.8; margin-bottom: 15px">
            We support the most commonly used image formats on the web:
          </p>
          <ul
            style="
              color: #555;
              line-height: 1.8;
              margin-bottom: 25px;
              padding-left: 25px;
            "
          >
            <li style="margin-bottom: 10px">
              <strong>JPG/JPEG:</strong> Best for photographs and images with
              many colors. Our compression typically reduces file size by 40-70%
              while maintaining excellent visual quality.
            </li>
            <li style="margin-bottom: 10px">
              <strong>PNG:</strong> Ideal for graphics, logos, and images with
              transparency. Compression is lossless, meaning no quality
              degradation occurs during the process.
            </li>
            <li style="margin-bottom: 10px">
              <strong>WEBP:</strong> A modern format that provides superior
              compression. Already optimized images may see smaller reductions,
              but unoptimized WEBP files can be reduced significantly.
            </li>
          </ul>

          <h3 style="color: #1e3a8a; margin-bottom: 15px; margin-top: 35px">
            Common Use Cases
          </h3>
          <p style="color: #555; line-height: 1.8; margin-bottom: 15px">
            Image compression serves various purposes across different
            scenarios:
          </p>
          <ul
            style="
              color: #555;
              line-height: 1.8;
              margin-bottom: 25px;
              padding-left: 25px;
            "
          >
            <li style="margin-bottom: 10px">
              <strong>Website Optimization:</strong> Faster page loading times
              improve user experience and search engine rankings. Compressed
              images are essential for modern web performance.
            </li>
            <li style="margin-bottom: 10px">
              <strong>Email Attachments:</strong> Many email providers have
              attachment size limits. Compressing images ensures your emails
              send quickly without hitting size restrictions.
            </li>
            <li style="margin-bottom: 10px">
              <strong>Social Media:</strong> Platforms often compress images
              automatically, but pre-compressing gives you more control over the
              final quality.
            </li>
            <li style="margin-bottom: 10px">
              <strong>Cloud Storage:</strong> Reduce storage costs and free up
              space by compressing images before uploading to cloud services.
            </li>
            <li style="margin-bottom: 10px">
              <strong>Mobile Sharing:</strong> Smaller files transfer faster and
              consume less mobile data when sharing photos with friends and
              family.
            </li>
          </ul>

          <h3 style="color: #1e3a8a; margin-bottom: 15px; margin-top: 35px">
            Quality vs. File Size Balance
          </h3>
          <p style="color: #555; line-height: 1.8; margin-bottom: 25px">
            Finding the right balance between image quality and file size
            depends on your specific needs. For web use, most images can be
            compressed by 50-70% without visible quality loss to the average
            viewer. Professional photography or print materials may require
            lighter compression to preserve fine details. Our tool aims for an
            optimal balance that works well for most general purposes while
            allowing you to re-compress with different settings if needed.
          </p>
        </div>
      </div>
    </section>

    <!-- Tips and Best Practices Section -->
    <section class="features" style="background: white; padding: 60px 20px">
      <div class="container">
        <h2>Image Compression Tips and Best Practices</h2>
        <div style="max-width: 900px; margin: 0 auto; text-align: left">
          <div style="margin-bottom: 40px">
            <h3 style="color: #1e3a8a; margin-bottom: 15px">
              When to Compress Images
            </h3>
            <p style="color: #555; line-height: 1.8; margin-bottom: 15px">
              Not all images require compression, but certain situations call
              for it. Compress images before uploading to your website to ensure
              fast page loading. Email attachments benefit from compression when
              you need to send multiple photos or high-resolution images. Before
              uploading to social media, compression gives you control over
              quality rather than relying on platform compression. Cloud storage
              becomes more cost-effective when images are compressed before
              upload.
            </p>
            <p style="color: #555; line-height: 1.8">
              However, avoid compressing images multiple times, as each
              compression cycle can degrade quality. Always keep original,
              uncompressed versions of important images for archival purposes or
              future editing.
            </p>
          </div>

          <div style="margin-bottom: 40px">
            <h3 style="color: #1e3a8a; margin-bottom: 15px">
              Preparing Images for Compression
            </h3>
            <p style="color: #555; line-height: 1.8; margin-bottom: 15px">
              To achieve the best results with image compression, start with
              high-quality source images. Resize images to the dimensions you
              actually need before compressing. For example, if an image will
              display at 800 pixels wide on your website, resize it to that
              width before compression rather than compressing a 4000-pixel wide
              image.
            </p>
            <p style="color: #555; line-height: 1.8">
              Choose the appropriate format for your image type. Use JPG for
              photographs and complex images with many colors. PNG works best
              for graphics, logos, screenshots, and images requiring
              transparency. WEBP offers excellent compression for modern
              browsers but consider providing JPG fallbacks for older systems.
            </p>
          </div>

          <div style="margin-bottom: 40px">
            <h3 style="color: #1e3a8a; margin-bottom: 15px">
              Understanding Compression Results
            </h3>
            <p style="color: #555; line-height: 1.8; margin-bottom: 15px">
              After compressing an image, review the results before using the
              file. Compare the compressed image to the original to ensure
              quality meets your requirements. Check file size reduction
              percentage to understand the space savings achieved. Verify that
              important details remain clear and that no unwanted artifacts have
              been introduced.
            </p>
            <p style="color: #555; line-height: 1.8">
              Typical compression results vary by image type. Photographs
              usually achieve 40-70% size reduction. Graphics and screenshots
              with large areas of solid color may see 60-80% reduction. Already
              optimized images might only compress by 10-20%, which is normal
              and indicates they were previously optimized.
            </p>
          </div>

          <div style="margin-bottom: 40px">
            <h3 style="color: #1e3a8a; margin-bottom: 15px">
              Batch Processing Workflow
            </h3>
            <p style="color: #555; line-height: 1.8; margin-bottom: 15px">
              When working with multiple images, developing an efficient
              workflow saves time. Sort images by type and purpose before
              starting. Compress all images of similar type together to maintain
              consistent quality across your project. Keep track of which images
              have been compressed to avoid processing the same file multiple
              times.
            </p>
            <p style="color: #555; line-height: 1.8">
              Create a folder structure to organize original and compressed
              versions. Many users maintain an "originals" folder for source
              files and a "compressed" or "web" folder for optimized versions.
              This organization prevents confusion and ensures you always have
              access to uncompressed versions if needed.
            </p>
          </div>

          <div style="margin-bottom: 40px">
            <h3 style="color: #1e3a8a; margin-bottom: 15px">
              Mobile and Performance Considerations
            </h3>
            <p style="color: #555; line-height: 1.8; margin-bottom: 15px">
              Mobile devices benefit significantly from compressed images.
              Smaller file sizes mean faster loading on cellular connections and
              less data consumption. When optimizing for mobile, consider that
              screens are smaller, so you can often use lower resolution images
              without quality concerns.
            </p>
            <p style="color: #555; line-height: 1.8">
              For websites, compressed images directly impact page speed scores,
              which affect search engine rankings. Every kilobyte saved
              contributes to better performance metrics. Aim to keep most web
              images under 200KB for optimal performance, with hero images or
              featured photos potentially reaching 300-500KB after compression.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ Section -->
    <section class="features" style="background: #f9fafb; padding: 60px 20px">
      <div class="container">
        <h2>Frequently Asked Questions About Image Compression</h2>
        <div style="max-width: 800px; margin: 0 auto; text-align: left">
          <div style="margin-bottom: 30px">
            <h3 style="color: #1e3a8a; margin-bottom: 10px">
              Will compressing images reduce their quality?
            </h3>
            <p style="color: #555; line-height: 1.8">
              Our compression tool is designed to reduce file size while
              maintaining visual quality. For most images, the quality
              difference is imperceptible to the human eye. We use smart
              algorithms that remove unnecessary data and optimize image
              encoding without degrading the visible image content.
            </p>
          </div>

          <div style="margin-bottom: 30px">
            <h3 style="color: #1e3a8a; margin-bottom: 10px">
              What image formats can I compress?
            </h3>
            <p style="color: #555; line-height: 1.8">
              We currently support JPG, JPEG, PNG, and WEBP formats. These are
              the most commonly used image formats on the web and cover the vast
              majority of use cases for digital images.
            </p>
          </div>

          <div style="margin-bottom: 30px">
            <h3 style="color: #1e3a8a; margin-bottom: 10px">
              How much can I reduce my image file size?
            </h3>
            <p style="color: #555; line-height: 1.8">
              Compression results vary depending on the image type and content.
              Photographs typically see 40-70% size reduction. Graphics and
              images with large areas of solid color may achieve 60-80%
              reduction. Images that have already been optimized may only
              compress by 10-20%.
            </p>
          </div>

          <div style="margin-bottom: 30px">
            <h3 style="color: #1e3a8a; margin-bottom: 10px">
              Is my image data secure during compression?
            </h3>
            <p style="color: #555; line-height: 1.8">
              Yes, your privacy and security are our priority. Images are
              processed securely on our servers and are automatically deleted
              immediately after compression. We never store, share, or access
              the content of your images.
            </p>
          </div>

          <div style="margin-bottom: 30px">
            <h3 style="color: #1e3a8a; margin-bottom: 10px">
              Can I compress multiple images at once?
            </h3>
            <p style="color: #555; line-height: 1.8">
              Currently, our tool processes one image at a time to ensure
              optimal quality and faster processing. You can compress multiple
              images by repeating the process for each file.
            </p>
          </div>

          <div style="margin-bottom: 30px">
            <h3 style="color: #1e3a8a; margin-bottom: 10px">
              What happens to image metadata during compression?
            </h3>
            <p style="color: #555; line-height: 1.8">
              Our compression process removes most metadata including EXIF data,
              GPS coordinates, and camera information. This removal contributes
              to size reduction and also helps protect your privacy by removing
              potentially sensitive location and device information.
            </p>
          </div>

          <div style="margin-bottom: 30px">
            <h3 style="color: #1e3a8a; margin-bottom: 10px">
              Is there a file size limit for compression?
            </h3>
            <p style="color: #555; line-height: 1.8">
              We can handle most common image file sizes. Very large images over
              50MB may take longer to process depending on your internet
              connection speed. For best results, we recommend working with
              images under 20MB.
            </p>
          </div>

          <div style="margin-bottom: 30px">
            <h3 style="color: #1e3a8a; margin-bottom: 10px">
              Can I use compressed images for printing?
            </h3>
            <p style="color: #555; line-height: 1.8">
              While our compression maintains good visual quality, print
              materials may require higher resolution and less compression than
              web images. For professional printing, we recommend using minimal
              compression or consulting your print service provider for specific
              requirements.
            </p>
          </div>

          <div style="margin-bottom: 30px">
            <h3 style="color: #1e3a8a; margin-bottom: 10px">
              Does compression work on all devices?
            </h3>
            <p style="color: #555; line-height: 1.8">
              Yes, our image compression tool works on all modern devices
              including Windows, Mac, Linux, iOS, and Android. The tool is
              browser-based, so you can compress images from any device with an
              internet connection and a modern web browser.
            </p>
          </div>

          <div style="margin-bottom: 30px">
            <h3 style="color: #1e3a8a; margin-bottom: 10px">
              How often can I use the compression tool?
            </h3>
            <p style="color: #555; line-height: 1.8">
              Our image compression tool is completely free with unlimited
              usage. You can compress as many images as you need without any
              restrictions or daily limits.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Related Tools Section -->
    <section class="features" style="background: white; padding: 60px 20px">
      <div class="container">
        <h2>Related Image and PDF Tools</h2>
        <p style="text-align: center; color: #555; margin-bottom: 40px">
          Explore our other free tools to manage your images and PDF files
        </p>
        <div class="feature-grid">
          <div class="feature-card">
            <i
              class="fas fa-images"
              style="font-size: 40px; color: #10b981; margin-bottom: 15px"
            ></i>
            <h3>Image to PDF</h3>
            <p>
              Convert JPG, PNG, and other images to PDF format. Combine multiple
              images into a single PDF document.
            </p>
            <a
              href="/image-to-pdf"
              class="cta-button"
              style="font-size: 14px; padding: 8px 16px; margin-top: 10px"
              >Use Tool</a
            >
          </div>
          <div class="feature-card">
            <i
              class="fas fa-compress"
              style="font-size: 40px; color: #f59e0b; margin-bottom: 15px"
            ></i>
            <h3>Compress PDF</h3>
            <p>
              Reduce PDF file size without losing quality. Perfect for email
              attachments and faster uploads.
            </p>
            <a
              href="/compress-pdf"
              class="cta-button"
              style="font-size: 14px; padding: 8px 16px; margin-top: 10px"
              >Use Tool</a
            >
          </div>
          <div class="feature-card">
            <i
              class="fas fa-file-image"
              style="font-size: 40px; color: #10b981; margin-bottom: 15px"
            ></i>
            <h3>PDF to Image</h3>
            <p>
              Convert PDF pages to JPG or PNG images. Extract images from PDF
              files easily.
            </p>
            <a
              href="/pdf-to-image"
              class="cta-button"
              style="font-size: 14px; padding: 8px 16px; margin-top: 10px"
              >Use Tool</a
            >
          </div>
          <div class="feature-card">
            <i
              class="fas fa-object-group"
              style="font-size: 40px; color: #4f46e5; margin-bottom: 15px"
            ></i>
            <h3>Merge PDFs</h3>
            <p>
              Combine multiple PDF files into one document. Perfect for
              organizing reports and presentations.
            </p>
            <a
              href="/merge"
              class="cta-button"
              style="font-size: 14px; padding: 8px 16px; margin-top: 10px"
              >Use Tool</a
            >
          </div>
        </div>
      </div>
    </section>

    <section id="footer-placeholder"></section>

    <script src="./js/app.js"></script>

    <script>
      const BACKEND_COMPRESS_URL = `${BACKEND_BASE_URL}/compress-image/`;

      const imageInput = document.getElementById("imageUpload");
      const compressBtn = document.getElementById("compressBtn");
      const loader = compressBtn.querySelector(".loader-icon");
      const btnIcon = compressBtn.querySelector(".btn-icon");
      const resultSection = document.getElementById("resultBtns");
      const downloadBtn = document.getElementById("downloadBtn");
      const resetBtn = document.getElementById("resetBtn");
      const shareBtn = document.getElementById("shareBtn");
      const fileList = document.getElementById("fileList");
      const errorMsg = document.getElementById("errorMsg");
      const noteText = document.getElementById("noteText");
      const uploadSection = document.getElementById("uploadSection");

      const compressionInfo = document.getElementById("compressionInfo");
      const originalSizeEl = document.getElementById("originalSize");
      const compressedSizeEl = document.getElementById("compressedSize");
      const reductionPercentEl = document.getElementById("reductionPercent");
      const fileNameLink = document.getElementById("fileNameLink");
      const imageFrame = document.getElementById("imageFrame");
      const imagePreview = document.getElementById("imagePreview");

      let selectedFile = null;

      function formatFileSize(bytes) {
        const k = 1024;
        const sizes = ["Bytes", "KB", "MB"];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return (
          Math.round((bytes / Math.pow(k, i)) * 100) / 100 + " " + sizes[i]
        );
      }

      // File select
      imageInput.addEventListener("change", () => {
        selectedFile = imageInput.files[0];
        errorMsg.style.display = "none";

        if (selectedFile) {
          fileList.style.display = "block";
          fileList.innerHTML = `
            <li>
                <span><i class="fa fa-image" style="margin-right: 5px;"></i> ${selectedFile.name}</span>
                <i class="fa fa-times delete-file"></i>
            </li>`;
        }
      });

      // Delete file
      fileList.addEventListener("click", (e) => {
        if (e.target.classList.contains("delete-file")) {
          selectedFile = null;
          imageInput.value = "";
          fileList.style.display = "none";
        }
      });

      // Compress click
      compressBtn.addEventListener("click", async () => {
        if (!selectedFile) {
          errorMsg.textContent = "Please select an image first";
          errorMsg.style.display = "block";
          return;
        }

        btnIcon.style.display = "none";
        loader.style.display = "inline-block";
        compressBtn.disabled = true;

        const originalSize = selectedFile.size;
        const formData = new FormData();
        formData.append("file", selectedFile);

        try {
          const response = await fetch(BACKEND_COMPRESS_URL, {
            method: "POST",
            body: formData,
          });
          if (!response.ok) throw new Error();

          const blob = await response.blob();
          const url = URL.createObjectURL(blob);
          const compressedSize = blob.size;
          const reduction = (
            ((originalSize - compressedSize) / originalSize) *
            100
          ).toFixed(1);

          uploadSection.style.display = "none";
          fileList.style.display = "none";
          noteText.style.display = "none";
          compressBtn.style.display = "none";
          resultSection.style.display = "block";

          compressionInfo.style.display = "block";
          originalSizeEl.textContent = formatFileSize(originalSize);
          compressedSizeEl.textContent = formatFileSize(compressedSize);
          reductionPercentEl.textContent = `${reduction}% smaller`;

          downloadBtn.href = url;
          downloadBtn.download = `compressed_${selectedFile.name}`;
          fileNameLink.textContent = `compressed_${selectedFile.name}`;
          imageFrame.src = url;
          imagePreview.style.display = "block";

          // Show Share button if supported
          if (navigator.canShare) {
            shareBtn.style.display = "inline-flex";
            shareBtn.onclick = async () => {
              try {
                const file = new File(
                  [await fetch(url).then((r) => r.blob())],
                  `compressed_${selectedFile.name}`,
                  { type: selectedFile.type },
                );
                await navigator.share({
                  title: `Compressed Image - ${selectedFile.name}`,
                  files: [file],
                });
              } catch (err) {
                alert("Sharing failed: " + err);
              }
            };
          } else {
            shareBtn.style.display = "none";
          }
        } catch {
          errorMsg.textContent = "Compression failed. Try again.";
          errorMsg.style.display = "block";
        } finally {
          loader.style.display = "none";
          btnIcon.style.display = "inline-block";
          compressBtn.disabled = false;
        }
      });

      // Reset
      resetBtn.addEventListener("click", () => {
        imageInput.value = "";
        selectedFile = null;
        fileList.style.display = "none";
        resultSection.style.display = "none";
        uploadSection.style.display = "block";
        noteText.style.display = "block";
        compressBtn.style.display = "inline-flex";
        errorMsg.style.display = "none";
        compressionInfo.style.display = "none";
        imageFrame.src = "";
        imagePreview.style.display = "none";
        loader.style.display = "none";
        btnIcon.style.display = "inline-block";
        compressBtn.disabled = false;
        shareBtn.style.display = "none";
        window.scrollTo({ top: 0, behavior: "smooth" });
      });
    </script>
  </body>
</html>
